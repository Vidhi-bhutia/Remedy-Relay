<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Remedy Relay - Chatbot</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

    <style>
        body {
            background: linear-gradient(120deg, #23243a 0%, #283e77 50%, #7b2ff2 100%);
            font-family: 'Poppins', sans-serif;
            min-height: 100vh;
            margin: 0;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .chat {
            width: 100%;
            max-width: 460px;
        }
        .card {
            background: #222338;
            border-radius: 20px;
            box-shadow: 0px 8px 32px 0 rgba(44, 32, 80,0.50);
            overflow: hidden;
            border: none;
        }
        .card-header {
            background: linear-gradient(90deg,#6d8cff 40%, #a259ff 100%);
            color: white;
            border-bottom: none;
            display: flex;
            align-items: center;
            padding: 18px 20px;
        }
        .card-header img {
            width: 48px;
            height: 48px;
            border-radius: 50%;
            margin-right: 16px;
            border: 2px solid #fff6;
            background: #fff;
            box-shadow: 0 2px 10px #7b2ff23a;
        }
        .user_info span {
            font-size: 20px;
            font-weight: bold;
            color: #ffffff;
        }
        .user_info p {
            margin: 0;
            font-size: 13px;
            color: #dbd8fa;
        }
        .msg_card_body {
            height: 400px;
            overflow-y: auto;
            padding: 18px 15px;
            background: #1c1d2f;
        }
        .msg_cotainer, .msg_cotainer_send {
            border-radius: 15px;
            padding: 12px 17px;
            margin: 7px 0;
            max-width: 76%;
            animation: fadeIn 0.3s;
            word-break: break-word;
            font-size: 15px;
        }
        .msg_cotainer {
            background: #6d8cff;
            color: #fff;
            box-shadow: 0 1px 10px #6d8cff1c;
        }
        .msg_cotainer_send {
            background: #a259ff;
            color: #fff;
            align-self: flex-end;
            margin-left: auto;
            box-shadow: 0 1px 10px #a259ff1a;
        }
        .msg_time, .msg_time_send {
            font-size: 10px;
            display: block;
            margin-top: 6px;
            opacity: 0.85;
            color: #d2bfff;
        }
        .card-footer {
            background: #222338;
            border-top: none;
            padding: 13px 14px;
            display: flex;
        }
        .type_msg {
            border: none;
            border-radius: 18px;
            padding: 11px 15px;
            flex: 1;
            background: #212135;
            color: #fff;
            font-size: 15px;
            outline: none;
        }
        .type_msg::placeholder {
            color: #c0bade;
            opacity: 0.85;
        }
        .send_btn {
            border-radius: 50%;
            background: linear-gradient(90deg,#6d8cff 30%, #a259ff 100%);
            border: none;
            margin-left: 12px;
            padding: 13px 14px;
            color: #fff;
            font-size: 16px;
            transition: box-shadow 0.18s, transform 0.23s;
            box-shadow: 0 2px 8px #7b2ff235;
        }
        .send_btn:hover {
            box-shadow: 0 0 16px #a259ff93;
            transform: scale(1.07);
        }
        @keyframes fadeIn {
            from {opacity: 0; transform: translateY(12px);}
            to {opacity: 1; transform: translateY(0);}
        }
        ::-webkit-scrollbar {
            width: 6px;
        }
        ::-webkit-scrollbar-thumb {
            background: linear-gradient(#a259ff 20%, #6d8cff 100%);
            border-radius: 16px;
        }
        ::selection {
            background: #a259ff44;
        }
    </style>
</head>
<body>

<div class="chat">
    <div class="card">
        <div class="card-header">
            <img src="https://cdn-icons-png.flaticon.com/512/387/387569.png" alt="Bot">
            <div class="user_info">
                <span>Remedy Relay</span>
                <p>Your Medical Assistance Bot</p>
            </div>
        </div>
        <div id="messageFormeight" class="card-body msg_card_body"></div>
        <div class="card-footer">
            <form id="messageArea" class="input-group">
                <input type="text" id="text" name="msg" placeholder="Type your message..." autocomplete="off" class="form-control type_msg" required/>
                <div class="input-group-append">
                    <button type="submit" id="send" class="input-group-text send_btn"><i class="fas fa-paper-plane"></i></button>
                </div>
            </form>
        </div>
    </div>
</div>

<script>
    $(document).ready(function() {
        $("#messageArea").on("submit", function(event) {
            event.preventDefault();
            const date = new Date();
            const time = date.getHours() + ":" + (date.getMinutes()<10?'0':'') + date.getMinutes();
            let rawText = $("#text").val();

            let userHtml = `
                <div class="d-flex justify-content-end mb-2">
                    <div class="msg_cotainer_send">${rawText}<span class="msg_time_send">${time}</span></div>
                </div>`;
            $("#messageFormeight").append(userHtml);
            $("#text").val("");

            $.ajax({
                data: { msg: rawText },
                type: "POST",
                url: "/get",
            }).done(function(data) {
                let botHtml = `
                    <div class="d-flex justify-content-start mb-2">
                        <div class="msg_cotainer">${data}<span class="msg_time">${time}</span></div>
                    </div>`;
                $("#messageFormeight").append(botHtml);
                $("#messageFormeight").scrollTop($("#messageFormeight")[0].scrollHeight);
            });
        });
    });
</script>
</body>
</html>
